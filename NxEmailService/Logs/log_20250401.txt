{"Timestamp":"2025-04-01T22:25:33.6103932+02:00","Level":"Error","MessageTemplate":"Failed executing DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","Properties":{"elapsed":"60","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\r\n","commandText":"SELECT \"MigrationId\", \"ProductVersion\"\r\nFROM \"__EFMigrationsHistory\"\r\nORDER BY \"MigrationId\";","EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ApplicationName":"NxEmailService"}}
{"Timestamp":"2025-04-01T22:27:26.2131813+02:00","Level":"Error","MessageTemplate":"Failed executing DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","Properties":{"elapsed":"40","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\r\n","commandText":"CREATE TABLE dbo.\"EmailHistory\" (\r\n    \"EmailHistoryID\" integer GENERATED BY DEFAULT AS IDENTITY,\r\n    \"From\" character varying(500) NOT NULL,\r\n    \"To\" text NOT NULL,\r\n    \"CC\" text,\r\n    \"BCC\" text,\r\n    \"Template\" character varying(1000),\r\n    \"Body\" text,\r\n    \"Attachments\" text,\r\n    \"RelatedEntityName\" character varying(1000),\r\n    \"RelatedEntityId\" character varying(68),\r\n    \"IsSent\" boolean DEFAULT FALSE,\r\n    \"CreatedOnUTC\" timestamp(3) with time zone NOT NULL DEFAULT ((NOW() AT TIME ZONE 'UTC')),\r\n    CONSTRAINT \"PK_EmailHistory_EmailHistoryID\" PRIMARY KEY (\"EmailHistoryID\")\r\n);","EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ApplicationName":"NxEmailService"}}
{"Timestamp":"2025-04-01T22:31:54.5073771+02:00","Level":"Error","MessageTemplate":"Failed executing DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","Properties":{"elapsed":"52","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\r\n","commandText":"SELECT \"MigrationId\", \"ProductVersion\"\r\nFROM \"__EFMigrationsHistory\"\r\nORDER BY \"MigrationId\";","EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ApplicationName":"NxEmailService"}}
{"Timestamp":"2025-04-01T22:31:55.2183686+02:00","Level":"Error","MessageTemplate":"Failed executing DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","Properties":{"elapsed":"41","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\r\n","commandText":"CREATE TABLE dbo.\"EmailHistory\" (\r\n    \"EmailHistoryID\" integer GENERATED BY DEFAULT AS IDENTITY,\r\n    \"From\" character varying(500) NOT NULL,\r\n    \"To\" text NOT NULL,\r\n    \"CC\" text,\r\n    \"BCC\" text,\r\n    \"Template\" character varying(1000),\r\n    \"Body\" text,\r\n    \"Attachments\" text,\r\n    \"RelatedEntityName\" character varying(1000),\r\n    \"RelatedEntityId\" character varying(68),\r\n    \"IsSent\" boolean DEFAULT FALSE,\r\n    \"CreatedOnUTC\" timestamp(3) with time zone NOT NULL DEFAULT ((NOW() AT TIME ZONE 'UTC')),\r\n    CONSTRAINT \"PK_EmailHistory_EmailHistoryID\" PRIMARY KEY (\"EmailHistoryID\")\r\n);","EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ApplicationName":"NxEmailService"}}
{"Timestamp":"2025-04-01T22:32:55.4210286+02:00","Level":"Error","MessageTemplate":"Failed executing DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","Properties":{"elapsed":"45","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\r\n","commandText":"CREATE TABLE dbo.\"EmailHistory\" (\r\n    \"EmailHistoryID\" integer GENERATED BY DEFAULT AS IDENTITY,\r\n    \"From\" character varying(500) NOT NULL,\r\n    \"To\" text NOT NULL,\r\n    \"CC\" text,\r\n    \"BCC\" text,\r\n    \"Template\" character varying(1000),\r\n    \"Body\" text,\r\n    \"Attachments\" text,\r\n    \"RelatedEntityName\" character varying(1000),\r\n    \"RelatedEntityId\" character varying(68),\r\n    \"IsSent\" boolean DEFAULT FALSE,\r\n    \"CreatedOnUTC\" timestamp(3) with time zone NOT NULL DEFAULT ((NOW() AT TIME ZONE 'UTC')),\r\n    CONSTRAINT \"PK_EmailHistory_EmailHistoryID\" PRIMARY KEY (\"EmailHistoryID\")\r\n);","EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ApplicationName":"NxEmailService"}}
{"Timestamp":"2025-04-01T22:34:50.5508025+02:00","Level":"Error","MessageTemplate":"An unhandled exception has occurred while executing the request.","TraceId":"51fa49d763540799d7c944a1961a8fda","SpanId":"f3dd2939495a5d14","Exception":"Microsoft.AspNetCore.Http.BadHttpRequestException: Failed to read parameter \"EmailSetUp emailSet\" from the request body as JSON.\r\n ---> System.Text.Json.JsonException: The JSON value could not be converted to System.IO.Stream. Path: $.attachments[0].data | LineNumber: 31 | BytePositionInLine: 22.\r\n   at System.Text.Json.ThrowHelper.ThrowJsonException_DeserializeUnableToConvertValue(Type propertyType)\r\n   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value)\r\n   at System.Text.Json.Serialization.JsonConverter`1.TryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value, Boolean& isPopulatedValue)\r\n   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.ReadJsonAndSetMember(Object obj, ReadStack& state, Utf8JsonReader& reader)\r\n   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value)\r\n   at System.Text.Json.Serialization.JsonConverter`1.TryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value, Boolean& isPopulatedValue)\r\n   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, TCollection& value)\r\n   at System.Text.Json.Serialization.JsonConverter`1.TryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value, Boolean& isPopulatedValue)\r\n   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.ReadJsonAndSetMember(Object obj, ReadStack& state, Utf8JsonReader& reader)\r\n   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value)\r\n   at System.Text.Json.Serialization.JsonConverter`1.TryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value, Boolean& isPopulatedValue)\r\n   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, T& value, JsonSerializerOptions options, ReadStack& state)\r\n   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.ContinueDeserialize(ReadBufferState& bufferState, JsonReaderState& jsonReaderState, ReadStack& readStack, T& value)\r\n   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsync(Stream utf8Json, CancellationToken cancellationToken)\r\n   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsObjectAsync(Stream utf8Json, CancellationToken cancellationToken)\r\n   at Microsoft.AspNetCore.Http.HttpRequestJsonExtensions.ReadFromJsonAsync(HttpRequest request, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)\r\n   at Microsoft.AspNetCore.Http.HttpRequestJsonExtensions.ReadFromJsonAsync(HttpRequest request, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)\r\n   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<HandleRequestBodyAndCompileRequestDelegateForJson>g__TryReadBodyAsync|102_0(HttpContext httpContext, Type bodyType, String parameterTypeName, String parameterName, Boolean allowEmptyRequestBody, Boolean throwOnBadRequest, JsonTypeInfo jsonTypeInfo)\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.AspNetCore.Http.RequestDelegateFactory.Log.InvalidJsonRequestBody(HttpContext httpContext, String parameterTypeName, String parameterName, Exception exception, Boolean shouldThrow)\r\n   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<HandleRequestBodyAndCompileRequestDelegateForJson>g__TryReadBodyAsync|102_0(HttpContext httpContext, Type bodyType, String parameterTypeName, String parameterName, Boolean allowEmptyRequestBody, Boolean throwOnBadRequest, JsonTypeInfo jsonTypeInfo)\r\n   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass102_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()\r\n--- End of stack trace from previous location ---\r\n   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)\r\n   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)\r\n   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)","Properties":{"EventId":{"Id":1,"Name":"UnhandledException"},"SourceContext":"Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware","RequestId":"0HNBHBIGDJKRC:0000000F","RequestPath":"/api/email-service/send-email","ConnectionId":"0HNBHBIGDJKRC","ApplicationName":"NxEmailService"}}
{"Timestamp":"2025-04-01T22:35:55.7229535+02:00","Level":"Error","MessageTemplate":"Exception: Template not found! Template: asd; Inner Exception: ","TraceId":"3aff64db8f6955c2d0b88b89736c1f16","SpanId":"98d38f7b0c2305a2","Exception":"System.Exception: Template not found! Template: asd\r\n   at NxEmailService.EmailService.MailClient.SendEmailAsync(EmailSetUp es) in C:\\Nikola\\Active Projects\\NxEmailService\\NxEmailService\\EmailService\\MailClient.cs:line 53","Properties":{"RequestId":"0HNBHBJ43643J:0000000B","RequestPath":"/api/email-service/send-email","ConnectionId":"0HNBHBJ43643J","ApplicationName":"NxEmailService"}}
{"Timestamp":"2025-04-01T23:07:59.9463205+02:00","Level":"Error","MessageTemplate":"An unhandled exception has occurred while executing the request.","TraceId":"675ed6f3c00b5e5724de7d43fe613b7b","SpanId":"bbebb6b0a901ed4d","Exception":"System.FormatException: The specified string is not in the form required for an e-mail address.\r\n   at System.Net.Mail.MailAddressParser.TryReadCfwsAndThrowIfIncomplete(String data, Int32 index, Int32& outIndex, Boolean throwExceptionIfFail)\r\n   at System.Net.Mail.MailAddressParser.TryParseDomain(String data, Int32& index, String& domain, Boolean throwExceptionIfFail)\r\n   at System.Net.Mail.MailAddressParser.TryParseAddress(String data, Boolean expectMultipleAddresses, Int32& index, ParseAddressInfo& parseAddressInfo, Boolean throwExceptionIfFail)\r\n   at System.Net.Mail.MailAddressParser.TryParseAddress(String data, ParseAddressInfo& parsedAddress, Boolean throwExceptionIfFail)\r\n   at System.Net.Mail.MailAddress.TryParse(String address, String displayName, Encoding displayNameEncoding, ValueTuple`4& parsedData, Boolean throwExceptionIfFail)\r\n   at System.Net.Mail.MailAddress..ctor(String address)\r\n   at NxEmailService.Endpoints.EmailServiceEndpoints.<>c.<<MapEndpoints>b__0_0>d.MoveNext() in C:\\Nikola\\Active Projects\\NxEmailService\\NxEmailService\\Endpoints\\EmailServiceEndpoints.cs:line 26\r\n--- End of stack trace from previous location ---\r\n   at Microsoft.AspNetCore.Http.RequestDelegateFactory.ExecuteTaskResult[T](Task`1 task, HttpContext httpContext)\r\n   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)\r\n   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)\r\n   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)","Properties":{"EventId":{"Id":1,"Name":"UnhandledException"},"SourceContext":"Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware","RequestId":"0HNBHC522O5PF:00000009","RequestPath":"/api/email-service/send-email","ConnectionId":"0HNBHC522O5PF","ApplicationName":"NxEmailService"}}
