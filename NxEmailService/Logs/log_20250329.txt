{"Timestamp":"2025-03-29T22:10:32.1607744+01:00","Level":"Error","MessageTemplate":"Testing","Properties":{"ApplicationName":"NxEmailService"}}
{"Timestamp":"2025-03-29T22:10:32.3356422+01:00","Level":"Information","MessageTemplate":"Now listening on: {address}","Properties":{"address":"https://localhost:7274","EventId":{"Id":14,"Name":"ListeningOnAddress"},"SourceContext":"Microsoft.Hosting.Lifetime","ApplicationName":"NxEmailService"}}
{"Timestamp":"2025-03-29T22:10:32.3384367+01:00","Level":"Information","MessageTemplate":"Now listening on: {address}","Properties":{"address":"http://localhost:5043","EventId":{"Id":14,"Name":"ListeningOnAddress"},"SourceContext":"Microsoft.Hosting.Lifetime","ApplicationName":"NxEmailService"}}
{"Timestamp":"2025-03-29T22:10:32.3460256+01:00","Level":"Information","MessageTemplate":"No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts","Properties":{"EventId":{"Id":1,"Name":"NoActionDescriptors"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.DefaultActionDescriptorCollectionProvider","ApplicationName":"NxEmailService"}}
{"Timestamp":"2025-03-29T22:10:32.4486185+01:00","Level":"Information","MessageTemplate":"Application started. Press Ctrl+C to shut down.","Properties":{"SourceContext":"Microsoft.Hosting.Lifetime","ApplicationName":"NxEmailService"}}
{"Timestamp":"2025-03-29T22:10:32.4568149+01:00","Level":"Information","MessageTemplate":"Hosting environment: {EnvName}","Properties":{"EnvName":"Development","SourceContext":"Microsoft.Hosting.Lifetime","ApplicationName":"NxEmailService"}}
{"Timestamp":"2025-03-29T22:10:32.4581148+01:00","Level":"Information","MessageTemplate":"Content root path: {ContentRoot}","Properties":{"ContentRoot":"C:\\Nikola\\Active Projects\\NxEmailService","SourceContext":"Microsoft.Hosting.Lifetime","ApplicationName":"NxEmailService"}}
{"Timestamp":"2025-03-29T22:10:32.5320199+01:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"ac57e671744b5265ca7f3d0e3dac1ada","SpanId":"d0885a98bb7d698f","Properties":{"Protocol":"HTTP/2","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"https","Host":"localhost:7274","PathBase":"","Path":"/swagger/index.html","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNBF0OI2NO73:00000001","RequestPath":"/swagger/index.html","ConnectionId":"0HNBF0OI2NO73","ApplicationName":"NxEmailService"}}
{"Timestamp":"2025-03-29T22:10:32.6303460+01:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"ac57e671744b5265ca7f3d0e3dac1ada","SpanId":"d0885a98bb7d698f","Properties":{"ElapsedMilliseconds":98.9742,"StatusCode":200,"ContentType":"text/html;charset=utf-8","ContentLength":null,"Protocol":"HTTP/2","Method":"GET","Scheme":"https","Host":"localhost:7274","PathBase":"","Path":"/swagger/index.html","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNBF0OI2NO73:00000001","RequestPath":"/swagger/index.html","ConnectionId":"0HNBF0OI2NO73","ApplicationName":"NxEmailService"}}
{"Timestamp":"2025-03-29T22:10:32.6559853+01:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"ae4cf4701bbc182edd1105dad5115b29","SpanId":"5b4998ce789b9f90","Properties":{"Protocol":"HTTP/2","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"https","Host":"localhost:7274","PathBase":"","Path":"/_framework/aspnetcore-browser-refresh.js","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNBF0OI2NO73:00000003","RequestPath":"/_framework/aspnetcore-browser-refresh.js","ConnectionId":"0HNBF0OI2NO73","ApplicationName":"NxEmailService"}}
{"Timestamp":"2025-03-29T22:10:32.6559853+01:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"eea9a57d7b3d2e1dff24e56af9090e6d","SpanId":"e3ed0e02a45246db","Properties":{"Protocol":"HTTP/2","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"https","Host":"localhost:7274","PathBase":"","Path":"/swagger/index.js","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNBF0OI2NO73:00000005","RequestPath":"/swagger/index.js","ConnectionId":"0HNBF0OI2NO73","ApplicationName":"NxEmailService"}}
{"Timestamp":"2025-03-29T22:10:32.6644865+01:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"eea9a57d7b3d2e1dff24e56af9090e6d","SpanId":"e3ed0e02a45246db","Properties":{"ElapsedMilliseconds":8.4602,"StatusCode":200,"ContentType":"application/javascript;charset=utf-8","ContentLength":null,"Protocol":"HTTP/2","Method":"GET","Scheme":"https","Host":"localhost:7274","PathBase":"","Path":"/swagger/index.js","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNBF0OI2NO73:00000005","RequestPath":"/swagger/index.js","ConnectionId":"0HNBF0OI2NO73","ApplicationName":"NxEmailService"}}
{"Timestamp":"2025-03-29T22:10:32.6680054+01:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"ae4cf4701bbc182edd1105dad5115b29","SpanId":"5b4998ce789b9f90","Properties":{"ElapsedMilliseconds":12.0291,"StatusCode":200,"ContentType":"application/javascript; charset=utf-8","ContentLength":12357,"Protocol":"HTTP/2","Method":"GET","Scheme":"https","Host":"localhost:7274","PathBase":"","Path":"/_framework/aspnetcore-browser-refresh.js","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNBF0OI2NO73:00000003","RequestPath":"/_framework/aspnetcore-browser-refresh.js","ConnectionId":"0HNBF0OI2NO73","ApplicationName":"NxEmailService"}}
{"Timestamp":"2025-03-29T22:10:32.6852957+01:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"7aa64d4b9300647e13df304e2537865d","SpanId":"c6eec4d240244767","Properties":{"Protocol":"HTTP/2","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"https","Host":"localhost:7274","PathBase":"","Path":"/_vs/browserLink","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNBF0OI2NO73:00000007","RequestPath":"/_vs/browserLink","ConnectionId":"0HNBF0OI2NO73","ApplicationName":"NxEmailService"}}
{"Timestamp":"2025-03-29T22:10:32.7122969+01:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"7aa64d4b9300647e13df304e2537865d","SpanId":"c6eec4d240244767","Properties":{"ElapsedMilliseconds":26.9819,"StatusCode":200,"ContentType":"text/javascript; charset=UTF-8","ContentLength":null,"Protocol":"HTTP/2","Method":"GET","Scheme":"https","Host":"localhost:7274","PathBase":"","Path":"/_vs/browserLink","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNBF0OI2NO73:00000007","RequestPath":"/_vs/browserLink","ConnectionId":"0HNBF0OI2NO73","ApplicationName":"NxEmailService"}}
{"Timestamp":"2025-03-29T22:10:32.7964137+01:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"0b2607c2fb250031d23f66a6898bce38","SpanId":"2bd0a3b6b60b24f8","Properties":{"Protocol":"HTTP/2","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"https","Host":"localhost:7274","PathBase":"","Path":"/swagger/v1/swagger.json","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNBF0OI2NO73:00000009","RequestPath":"/swagger/v1/swagger.json","ConnectionId":"0HNBF0OI2NO73","ApplicationName":"NxEmailService"}}
{"Timestamp":"2025-03-29T22:10:32.8098040+01:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"0b2607c2fb250031d23f66a6898bce38","SpanId":"2bd0a3b6b60b24f8","Properties":{"ElapsedMilliseconds":13.0979,"StatusCode":200,"ContentType":"application/json;charset=utf-8","ContentLength":null,"Protocol":"HTTP/2","Method":"GET","Scheme":"https","Host":"localhost:7274","PathBase":"","Path":"/swagger/v1/swagger.json","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNBF0OI2NO73:00000009","RequestPath":"/swagger/v1/swagger.json","ConnectionId":"0HNBF0OI2NO73","ApplicationName":"NxEmailService"}}
{"Timestamp":"2025-03-29T22:11:47.5609753+01:00","Level":"Error","MessageTemplate":"Testing","Properties":{"ApplicationName":"NxEmailService"}}
{"Timestamp":"2025-03-29T22:23:35.3836018+01:00","Level":"Error","MessageTemplate":"Testing","Properties":{"ApplicationName":"NxEmailService"}}
{"Timestamp":"2025-03-29T22:29:13.8300628+01:00","Level":"Error","MessageTemplate":"Exception: Could not find file 'C:\\Nikola\\Active Projects\\NxEmailService\\Account_ForgotPassword.cshtml'.; Inner Exception: ","TraceId":"f6cb6d5fe7f372724269e38c56f5b08f","SpanId":"0b94afb7c29a436c","Exception":"System.IO.FileNotFoundException: Could not find file 'C:\\Nikola\\Active Projects\\NxEmailService\\Account_ForgotPassword.cshtml'.\r\nFile name: 'C:\\Nikola\\Active Projects\\NxEmailService\\Account_ForgotPassword.cshtml'\r\n   at Microsoft.Win32.SafeHandles.SafeFileHandle.CreateFile(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options)\r\n   at Microsoft.Win32.SafeHandles.SafeFileHandle.Open(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)\r\n   at System.IO.Strategies.OSFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)\r\n   at System.IO.Strategies.FileStreamHelpers.ChooseStrategyCore(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)\r\n   at System.IO.File.OpenRead(String path)\r\n   at FluentEmail.Core.Email.UsingTemplateFromFile[T](String filename, T model, Boolean isHtml)\r\n   at FluentEmail.Core.Email.UsingCultureTemplateFromFile[T](String filename, T model, CultureInfo culture, Boolean isHtml)\r\n   at NxEmailService.EmailService.MailClient.SendEmailAsync(EmailSetUp es) in C:\\Nikola\\Active Projects\\NxEmailService\\EmailService\\MailClient.cs:line 38","Properties":{"RequestId":"0HNBF12O400IA:0000000B","RequestPath":"/api/email-service/send-email","ConnectionId":"0HNBF12O400IA","ApplicationName":"NxEmailService"}}
{"Timestamp":"2025-03-29T22:29:14.3346377+01:00","Level":"Error","MessageTemplate":"Failed executing DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"f6cb6d5fe7f372724269e38c56f5b08f","SpanId":"0b94afb7c29a436c","Properties":{"elapsed":"9","parameters":"@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?' (DbType = Boolean), @p6='?', @p7='?'","commandType":"Text","commandTimeout":30,"newLine":"\r\n","commandText":"INSERT INTO dbo.\"EmailHistory\" (\"Attachments\", \"BCC\", \"Body\", \"CC\", \"From\", \"IsSent\", \"Template\", \"To\")\r\nVALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)\r\nRETURNING \"EmailHistoryID\", \"CreatedOnUTC\";","EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNBF12O400IA:0000000B","RequestPath":"/api/email-service/send-email","ConnectionId":"0HNBF12O400IA","ApplicationName":"NxEmailService"}}
{"Timestamp":"2025-03-29T22:29:14.3535055+01:00","Level":"Error","MessageTemplate":"An exception occurred in the database while saving changes for context type '{contextType}'.{newline}{error}","TraceId":"f6cb6d5fe7f372724269e38c56f5b08f","SpanId":"0b94afb7c29a436c","Exception":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\r\n ---> Npgsql.PostgresException (0x80004005): 23502: null value in column \"Template\" of relation \"EmailHistory\" violates not-null constraint\r\n\r\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\r\n   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\r\n   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)\r\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n  Exception data:\r\n    Severity: ERROR\r\n    SqlState: 23502\r\n    MessageText: null value in column \"Template\" of relation \"EmailHistory\" violates not-null constraint\r\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\r\n    SchemaName: dbo\r\n    TableName: EmailHistory\r\n    ColumnName: Template\r\n    File: execMain.c\r\n    Line: 1987\r\n    Routine: ExecConstraints\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","Properties":{"contextType":"NxEmailService.DbContexts.NxEmailServiceDbContext","newline":"\r\n","error":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\r\n ---> Npgsql.PostgresException (0x80004005): 23502: null value in column \"Template\" of relation \"EmailHistory\" violates not-null constraint\r\n\r\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\r\n   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\r\n   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)\r\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n  Exception data:\r\n    Severity: ERROR\r\n    SqlState: 23502\r\n    MessageText: null value in column \"Template\" of relation \"EmailHistory\" violates not-null constraint\r\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\r\n    SchemaName: dbo\r\n    TableName: EmailHistory\r\n    ColumnName: Template\r\n    File: execMain.c\r\n    Line: 1987\r\n    Routine: ExecConstraints\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","EventId":{"Id":10000,"Name":"Microsoft.EntityFrameworkCore.Update.SaveChangesFailed"},"SourceContext":"Microsoft.EntityFrameworkCore.Update","RequestId":"0HNBF12O400IA:0000000B","RequestPath":"/api/email-service/send-email","ConnectionId":"0HNBF12O400IA","ApplicationName":"NxEmailService"}}
{"Timestamp":"2025-03-29T22:29:14.3738047+01:00","Level":"Error","MessageTemplate":"An unhandled exception has occurred while executing the request.","TraceId":"f6cb6d5fe7f372724269e38c56f5b08f","SpanId":"0b94afb7c29a436c","Exception":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\r\n ---> Npgsql.PostgresException (0x80004005): 23502: null value in column \"Template\" of relation \"EmailHistory\" violates not-null constraint\r\n\r\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\r\n   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\r\n   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)\r\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n  Exception data:\r\n    Severity: ERROR\r\n    SqlState: 23502\r\n    MessageText: null value in column \"Template\" of relation \"EmailHistory\" violates not-null constraint\r\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\r\n    SchemaName: dbo\r\n    TableName: EmailHistory\r\n    ColumnName: Template\r\n    File: execMain.c\r\n    Line: 1987\r\n    Routine: ExecConstraints\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at LPMS.Infrastructure.Repositories.EmailHistoryRepository.CreateAsync(EmailHistory entity) in C:\\Nikola\\Active Projects\\NxEmailService\\Repositories\\EmailHistoryRepository.cs:line 18\r\n   at NxEmailService.EmailService.MailClient.SendEmailAsync(EmailSetUp es) in C:\\Nikola\\Active Projects\\NxEmailService\\EmailService\\MailClient.cs:line 60\r\n   at NxEmailService.Endpoints.EmailServiceEndpoints.<>c.<<MapEndpoints>b__0_0>d.MoveNext() in C:\\Nikola\\Active Projects\\NxEmailService\\Endpoints\\EmailServiceEndpoints.cs:line 24\r\n--- End of stack trace from previous location ---\r\n   at Microsoft.AspNetCore.Http.RequestDelegateFactory.ExecuteTaskResult[T](Task`1 task, HttpContext httpContext)\r\n   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass102_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()\r\n--- End of stack trace from previous location ---\r\n   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)\r\n   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)\r\n   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)","Properties":{"EventId":{"Id":1,"Name":"UnhandledException"},"SourceContext":"Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware","RequestId":"0HNBF12O400IA:0000000B","RequestPath":"/api/email-service/send-email","ConnectionId":"0HNBF12O400IA","ApplicationName":"NxEmailService"}}
{"Timestamp":"2025-03-29T22:32:07.6325490+01:00","Level":"Error","MessageTemplate":"Exception: Can't load metadata reference from the entry assembly. Make sure PreserveCompilationContext is set to true in *.csproj file; Inner Exception: ","TraceId":"3a2fea9e3927017a097d8083d00552a1","SpanId":"63ecbc584b7c86e4","Exception":"RazorLight.RazorLightException: Can't load metadata reference from the entry assembly. Make sure PreserveCompilationContext is set to true in *.csproj file\r\n   at RazorLight.Compilation.DefaultMetadataReferenceManager.Resolve(Assembly assembly, DependencyContext dependencyContext)\r\n   at RazorLight.Compilation.DefaultMetadataReferenceManager.Resolve(Assembly assembly)\r\n   at RazorLight.Compilation.RoslynCompilationService.EnsureOptions()\r\n   at RazorLight.Compilation.RoslynCompilationService.get_ParseOptions()\r\n   at RazorLight.Compilation.RoslynCompilationService.CreateSyntaxTree(SourceText sourceText)\r\n   at RazorLight.Compilation.RoslynCompilationService.CreateCompilation(String compilationContent, String assemblyName)\r\n   at RazorLight.Compilation.RoslynCompilationService.CompileAndEmit(IGeneratedRazorTemplate razorTemplate)\r\n   at RazorLight.Compilation.RazorTemplateCompiler.CompileAndEmit(RazorLightProjectItem projectItem)\r\n   at RazorLight.Compilation.RazorTemplateCompiler.OnCacheMissAsync(String templateKey)\r\n--- End of stack trace from previous location ---\r\n   at RazorLight.EngineHandler.CompileTemplateAsync(String key)\r\n   at RazorLight.EngineHandler.CompileRenderAsync[T](String key, T model, ExpandoObject viewBag)\r\n   at FluentEmail.Razor.RazorRenderer.FluentEmail.Core.Interfaces.ITemplateRenderer.Parse[T](String template, T model, Boolean isHtml)\r\n   at FluentEmail.Core.Email.UsingTemplateFromFile[T](String filename, T model, Boolean isHtml)\r\n   at FluentEmail.Core.Email.UsingCultureTemplateFromFile[T](String filename, T model, CultureInfo culture, Boolean isHtml)\r\n   at NxEmailService.EmailService.MailClient.SendEmailAsync(EmailSetUp es) in C:\\Nikola\\Active Projects\\NxEmailService\\EmailService\\MailClient.cs:line 38","Properties":{"RequestId":"0HNBF14HJ5NVN:0000000B","RequestPath":"/api/email-service/send-email","ConnectionId":"0HNBF14HJ5NVN","ApplicationName":"NxEmailService"}}
{"Timestamp":"2025-03-29T22:32:08.1471989+01:00","Level":"Error","MessageTemplate":"Failed executing DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"3a2fea9e3927017a097d8083d00552a1","SpanId":"63ecbc584b7c86e4","Properties":{"elapsed":"9","parameters":"@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?' (DbType = Boolean), @p6='?', @p7='?'","commandType":"Text","commandTimeout":30,"newLine":"\r\n","commandText":"INSERT INTO dbo.\"EmailHistory\" (\"Attachments\", \"BCC\", \"Body\", \"CC\", \"From\", \"IsSent\", \"Template\", \"To\")\r\nVALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)\r\nRETURNING \"EmailHistoryID\", \"CreatedOnUTC\";","EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNBF14HJ5NVN:0000000B","RequestPath":"/api/email-service/send-email","ConnectionId":"0HNBF14HJ5NVN","ApplicationName":"NxEmailService"}}
{"Timestamp":"2025-03-29T22:32:08.1657042+01:00","Level":"Error","MessageTemplate":"An exception occurred in the database while saving changes for context type '{contextType}'.{newline}{error}","TraceId":"3a2fea9e3927017a097d8083d00552a1","SpanId":"63ecbc584b7c86e4","Exception":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\r\n ---> Npgsql.PostgresException (0x80004005): 23502: null value in column \"Template\" of relation \"EmailHistory\" violates not-null constraint\r\n\r\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\r\n   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\r\n   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)\r\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n  Exception data:\r\n    Severity: ERROR\r\n    SqlState: 23502\r\n    MessageText: null value in column \"Template\" of relation \"EmailHistory\" violates not-null constraint\r\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\r\n    SchemaName: dbo\r\n    TableName: EmailHistory\r\n    ColumnName: Template\r\n    File: execMain.c\r\n    Line: 1987\r\n    Routine: ExecConstraints\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","Properties":{"contextType":"NxEmailService.DbContexts.NxEmailServiceDbContext","newline":"\r\n","error":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\r\n ---> Npgsql.PostgresException (0x80004005): 23502: null value in column \"Template\" of relation \"EmailHistory\" violates not-null constraint\r\n\r\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\r\n   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\r\n   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)\r\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n  Exception data:\r\n    Severity: ERROR\r\n    SqlState: 23502\r\n    MessageText: null value in column \"Template\" of relation \"EmailHistory\" violates not-null constraint\r\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\r\n    SchemaName: dbo\r\n    TableName: EmailHistory\r\n    ColumnName: Template\r\n    File: execMain.c\r\n    Line: 1987\r\n    Routine: ExecConstraints\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","EventId":{"Id":10000,"Name":"Microsoft.EntityFrameworkCore.Update.SaveChangesFailed"},"SourceContext":"Microsoft.EntityFrameworkCore.Update","RequestId":"0HNBF14HJ5NVN:0000000B","RequestPath":"/api/email-service/send-email","ConnectionId":"0HNBF14HJ5NVN","ApplicationName":"NxEmailService"}}
{"Timestamp":"2025-03-29T22:32:08.1835666+01:00","Level":"Error","MessageTemplate":"An unhandled exception has occurred while executing the request.","TraceId":"3a2fea9e3927017a097d8083d00552a1","SpanId":"63ecbc584b7c86e4","Exception":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\r\n ---> Npgsql.PostgresException (0x80004005): 23502: null value in column \"Template\" of relation \"EmailHistory\" violates not-null constraint\r\n\r\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\r\n   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\r\n   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)\r\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n  Exception data:\r\n    Severity: ERROR\r\n    SqlState: 23502\r\n    MessageText: null value in column \"Template\" of relation \"EmailHistory\" violates not-null constraint\r\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\r\n    SchemaName: dbo\r\n    TableName: EmailHistory\r\n    ColumnName: Template\r\n    File: execMain.c\r\n    Line: 1987\r\n    Routine: ExecConstraints\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at LPMS.Infrastructure.Repositories.EmailHistoryRepository.CreateAsync(EmailHistory entity) in C:\\Nikola\\Active Projects\\NxEmailService\\Repositories\\EmailHistoryRepository.cs:line 18\r\n   at NxEmailService.EmailService.MailClient.SendEmailAsync(EmailSetUp es) in C:\\Nikola\\Active Projects\\NxEmailService\\EmailService\\MailClient.cs:line 60\r\n   at NxEmailService.Endpoints.EmailServiceEndpoints.<>c.<<MapEndpoints>b__0_0>d.MoveNext() in C:\\Nikola\\Active Projects\\NxEmailService\\Endpoints\\EmailServiceEndpoints.cs:line 24\r\n--- End of stack trace from previous location ---\r\n   at Microsoft.AspNetCore.Http.RequestDelegateFactory.ExecuteTaskResult[T](Task`1 task, HttpContext httpContext)\r\n   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass102_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()\r\n--- End of stack trace from previous location ---\r\n   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)\r\n   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)\r\n   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)","Properties":{"EventId":{"Id":1,"Name":"UnhandledException"},"SourceContext":"Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware","RequestId":"0HNBF14HJ5NVN:0000000B","RequestPath":"/api/email-service/send-email","ConnectionId":"0HNBF14HJ5NVN","ApplicationName":"NxEmailService"}}
{"Timestamp":"2025-03-29T22:34:56.9322880+01:00","Level":"Error","MessageTemplate":"Error while sending e-mail! Errors: 535: 5.7.139 Authentication unsuccessful, basic authentication is disabled. [VI1P189CA0028.EURP189.PROD.OUTLOOK.COM 2025-03-29T21:34:12.030Z 08DD6655E3D2BDF3]","TraceId":"1034d81110a77ed484bc1f5a40b0f525","SpanId":"eeaecda3b85c6b94","Properties":{"RequestId":"0HNBF15BSTJCV:0000000B","RequestPath":"/api/email-service/send-email","ConnectionId":"0HNBF15BSTJCV","ApplicationName":"NxEmailService"}}
{"Timestamp":"2025-03-29T22:37:36.8112490+01:00","Level":"Error","MessageTemplate":"Error while sending e-mail! Errors: 535: 5.7.139 Authentication unsuccessful, basic authentication is disabled. [VI1PR09CA0111.eurprd09.prod.outlook.com 2025-03-29T21:37:36.458Z 08DD6EF6C51B2C85]","TraceId":"7a023ef3d64f0d70978d004cca808538","SpanId":"4ca6f08446b4c733","Properties":{"RequestId":"0HNBF17HUHM8C:0000000B","RequestPath":"/api/email-service/send-email","ConnectionId":"0HNBF17HUHM8C","ApplicationName":"NxEmailService"}}
{"Timestamp":"2025-03-29T22:41:53.1320306+01:00","Level":"Error","MessageTemplate":"Error while sending e-mail! Errors: 535: 5.7.139 Authentication unsuccessful, basic authentication is disabled. [VI1PR04CA0069.eurprd04.prod.outlook.com 2025-03-29T21:41:52.848Z 08DD64E1149DAA6A]","TraceId":"ec73c22c674eef5a01f665c3c7c85cf0","SpanId":"4b77206d525fd433","Properties":{"RequestId":"0HNBF19TSO98D:0000000B","RequestPath":"/api/email-service/send-email","ConnectionId":"0HNBF19TSO98D","ApplicationName":"NxEmailService"}}
{"Timestamp":"2025-03-29T22:42:45.9641655+01:00","Level":"Error","MessageTemplate":"Error while sending e-mail! Errors: 535: 5.7.139 Authentication unsuccessful, basic authentication is disabled. [VI1PR04CA0121.eurprd04.prod.outlook.com 2025-03-29T21:42:46.211Z 08DD6E55BBB45248]","TraceId":"c504ce5ab47ab33c49f6404db67f4d2a","SpanId":"2854fed8a56faf35","Properties":{"RequestId":"0HNBF19TSO98D:00000017","RequestPath":"/api/email-service/send-email","ConnectionId":"0HNBF19TSO98D","ApplicationName":"NxEmailService"}}
{"Timestamp":"2025-03-29T22:43:21.9085686+01:00","Level":"Error","MessageTemplate":"Error while sending e-mail! Errors: 535: 5.7.139 Authentication unsuccessful, basic authentication is disabled. [VI1PR0102CA0019.eurprd01.prod.exchangelabs.com 2025-03-29T21:43:22.188Z 08DD667EAE54E4F2]","TraceId":"a16d42140a72d790843ad156d92b294a","SpanId":"a92a60c40ed82fbd","Properties":{"RequestId":"0HNBF19TSO98D:00000019","RequestPath":"/api/email-service/send-email","ConnectionId":"0HNBF19TSO98D","ApplicationName":"NxEmailService"}}
{"Timestamp":"2025-03-29T22:47:00.9160102+01:00","Level":"Error","MessageTemplate":"Error while sending e-mail! Errors: 535: 5.7.139 Authentication unsuccessful, basic authentication is disabled. [VI1P194CA0041.EURP194.PROD.OUTLOOK.COM 2025-03-29T21:47:01.160Z 08DD6EE084552947]","TraceId":"f2e715d34ef298b0e024f98d23dd61fd","SpanId":"aa74c0b741ae75bd","Properties":{"RequestId":"0HNBF19TSO98G:0000000B","RequestPath":"/api/email-service/send-email","ConnectionId":"0HNBF19TSO98G","ApplicationName":"NxEmailService"}}
{"Timestamp":"2025-03-29T22:53:12.3521139+01:00","Level":"Error","MessageTemplate":"Error while sending e-mail! Errors: 535: 5.7.139 Authentication unsuccessful, basic authentication is disabled. [VI1PR06CA0111.eurprd06.prod.outlook.com 2025-03-29T21:53:12.493Z 08DD6EA9B1BA9709]","TraceId":"bc25e7b8db66661af08f3084607284f6","SpanId":"2198ef0b8b8499f8","Properties":{"RequestId":"0HNBF19TSO98I:0000000B","RequestPath":"/api/email-service/send-email","ConnectionId":"0HNBF19TSO98I","ApplicationName":"NxEmailService"}}
{"Timestamp":"2025-03-29T22:56:28.4823095+01:00","Level":"Error","MessageTemplate":"Error while sending e-mail! Errors: 535: 5.7.139 Authentication unsuccessful, basic authentication is disabled. [VI1P195CA0029.EURP195.PROD.OUTLOOK.COM 2025-03-29T21:56:17.488Z 08DD6EF73A94DAE8]","TraceId":"7bc568a35e7722df0dc65c35a155c95b","SpanId":"5ef3fef7def561dc","Properties":{"RequestId":"0HNBF1HSESO75:0000000B","RequestPath":"/api/email-service/send-email","ConnectionId":"0HNBF1HSESO75","ApplicationName":"NxEmailService"}}
{"Timestamp":"2025-03-29T22:57:34.8606609+01:00","Level":"Error","MessageTemplate":"Error while sending e-mail! Errors: 535: 5.7.139 Authentication unsuccessful, basic authentication is disabled. [VI1PR0102CA0032.eurprd01.prod.exchangelabs.com 2025-03-29T21:57:34.465Z 08DD668F24B38AF2]","TraceId":"fe44d13213c51aaccf3d9dae70d98df8","SpanId":"bdc2fe0d68da73b9","Properties":{"RequestId":"0HNBF1INBL29C:0000000B","RequestPath":"/api/email-service/send-email","ConnectionId":"0HNBF1INBL29C","ApplicationName":"NxEmailService"}}
{"Timestamp":"2025-03-29T23:01:21.7289254+01:00","Level":"Error","MessageTemplate":"Error while sending e-mail! Errors: 535: 5.7.139 Authentication unsuccessful, basic authentication is disabled. [VI1PR0102CA0019.eurprd01.prod.exchangelabs.com 2025-03-29T22:01:21.485Z 08DD667EAE54F036]","TraceId":"9ae64e2574dab3c0819071432ab75273","SpanId":"ae3767baf398f232","Properties":{"RequestId":"0HNBF1KPHEOQ0:0000000B","RequestPath":"/api/email-service/send-email","ConnectionId":"0HNBF1KPHEOQ0","ApplicationName":"NxEmailService"}}
{"Timestamp":"2025-03-29T23:04:58.6423501+01:00","Level":"Error","MessageTemplate":"Error while sending e-mail! Errors: 535: 5.7.139 Authentication unsuccessful, basic authentication is disabled. [VI1PR03CA0051.eurprd03.prod.outlook.com 2025-03-29T22:04:58.335Z 08DD6EFBF5CDF60C]","TraceId":"f8a62cbee49c396f6ef03c6ebd13a1d7","SpanId":"2c64849a7d798ce2","Properties":{"RequestId":"0HNBF1MR0TCMP:0000000B","RequestPath":"/api/email-service/send-email","ConnectionId":"0HNBF1MR0TCMP","ApplicationName":"NxEmailService"}}
{"Timestamp":"2025-03-29T23:10:53.5602831+01:00","Level":"Error","MessageTemplate":"Error while sending e-mail! Errors: 535: 5.7.8 Username and Password not accepted. For more information, go to\n5.7.8  https://support.google.com/mail/?p=BadCredentials a640c23a62f3a-ac7196dc49csm384208566b.168 - gsmtp","TraceId":"67db15ce80f241c699bd0aa87373cca2","SpanId":"348c26ccb2990693","Properties":{"RequestId":"0HNBF1Q5T3H1R:0000000B","RequestPath":"/api/email-service/send-email","ConnectionId":"0HNBF1Q5T3H1R","ApplicationName":"NxEmailService"}}
{"Timestamp":"2025-03-29T23:12:03.1764696+01:00","Level":"Error","MessageTemplate":"Error while sending e-mail! Errors: 535: 5.7.8 Username and Password not accepted. For more information, go to\n5.7.8  https://support.google.com/mail/?p=BadCredentials a640c23a62f3a-ac71967fe58sm387319466b.128 - gsmtp","TraceId":"32b90dd7e84b6240a32cdb8b68d67a86","SpanId":"bf8b0db8b37dc577","Properties":{"RequestId":"0HNBF1QRVCEJR:0000000B","RequestPath":"/api/email-service/send-email","ConnectionId":"0HNBF1QRVCEJR","ApplicationName":"NxEmailService"}}
{"Timestamp":"2025-03-29T23:16:54.6371302+01:00","Level":"Error","MessageTemplate":"Error while sending e-mail! Errors: 534: 5.7.9 Application-specific password required. For more information, go to\n5.7.9  https://support.google.com/mail/?p=InvalidSecondFactor a640c23a62f3a-ac71922cc94sm393117866b.28 - gsmtp","TraceId":"b8b62f872f308f010383a11d421fe508","SpanId":"26729d888da23de5","Properties":{"RequestId":"0HNBF1QRVCEJT:0000000B","RequestPath":"/api/email-service/send-email","ConnectionId":"0HNBF1QRVCEJT","ApplicationName":"NxEmailService"}}
{"Timestamp":"2025-03-29T23:44:57.7594472+01:00","Level":"Error","MessageTemplate":"Exception: Can't load metadata reference from the entry assembly. Make sure PreserveCompilationContext is set to true in *.csproj file; Inner Exception: ","TraceId":"c8ae8712232cee70ba92e28253bbb1eb","SpanId":"795fc86243090dbe","Exception":"RazorLight.RazorLightException: Can't load metadata reference from the entry assembly. Make sure PreserveCompilationContext is set to true in *.csproj file\r\n   at RazorLight.Compilation.DefaultMetadataReferenceManager.Resolve(Assembly assembly, DependencyContext dependencyContext)\r\n   at RazorLight.Compilation.DefaultMetadataReferenceManager.Resolve(Assembly assembly)\r\n   at RazorLight.Compilation.RoslynCompilationService.EnsureOptions()\r\n   at RazorLight.Compilation.RoslynCompilationService.get_ParseOptions()\r\n   at RazorLight.Compilation.RoslynCompilationService.CreateSyntaxTree(SourceText sourceText)\r\n   at RazorLight.Compilation.RoslynCompilationService.CreateCompilation(String compilationContent, String assemblyName)\r\n   at RazorLight.Compilation.RoslynCompilationService.CompileAndEmit(IGeneratedRazorTemplate razorTemplate)\r\n   at RazorLight.Compilation.RazorTemplateCompiler.CompileAndEmit(RazorLightProjectItem projectItem)\r\n   at RazorLight.Compilation.RazorTemplateCompiler.OnCacheMissAsync(String templateKey)\r\n--- End of stack trace from previous location ---\r\n   at RazorLight.EngineHandler.CompileTemplateAsync(String key)\r\n   at RazorLight.EngineHandler.CompileRenderAsync[T](String key, T model, ExpandoObject viewBag)\r\n   at FluentEmail.Razor.RazorRenderer.FluentEmail.Core.Interfaces.ITemplateRenderer.Parse[T](String template, T model, Boolean isHtml)\r\n   at FluentEmail.Core.Email.UsingTemplateFromFile[T](String filename, T model, Boolean isHtml)\r\n   at FluentEmail.Core.Email.UsingCultureTemplateFromFile[T](String filename, T model, CultureInfo culture, Boolean isHtml)\r\n   at NxEmailService.EmailService.MailClient.SendEmailAsync(EmailSetUp es) in C:\\Nikola\\NxEmailService\\NxEmailService\\EmailService\\MailClient.cs:line 37","Properties":{"RequestId":"0HNBF2D8PK6OE:00000009","RequestPath":"/api/email-service/send-email","ConnectionId":"0HNBF2D8PK6OE","ApplicationName":"NxEmailService"}}
{"Timestamp":"2025-03-29T23:44:58.4873599+01:00","Level":"Error","MessageTemplate":"Failed executing DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"c8ae8712232cee70ba92e28253bbb1eb","SpanId":"795fc86243090dbe","Properties":{"elapsed":"13","parameters":"@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?' (DbType = Boolean), @p6='?', @p7='?'","commandType":"Text","commandTimeout":30,"newLine":"\r\n","commandText":"INSERT INTO dbo.\"EmailHistory\" (\"Attachments\", \"BCC\", \"Body\", \"CC\", \"From\", \"IsSent\", \"Template\", \"To\")\r\nVALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)\r\nRETURNING \"EmailHistoryID\", \"CreatedOnUTC\";","EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNBF2D8PK6OE:00000009","RequestPath":"/api/email-service/send-email","ConnectionId":"0HNBF2D8PK6OE","ApplicationName":"NxEmailService"}}
{"Timestamp":"2025-03-29T23:44:58.5182686+01:00","Level":"Error","MessageTemplate":"An exception occurred in the database while saving changes for context type '{contextType}'.{newline}{error}","TraceId":"c8ae8712232cee70ba92e28253bbb1eb","SpanId":"795fc86243090dbe","Exception":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\r\n ---> Npgsql.PostgresException (0x80004005): 23502: null value in column \"Template\" of relation \"EmailHistory\" violates not-null constraint\r\n\r\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\r\n   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\r\n   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)\r\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n  Exception data:\r\n    Severity: ERROR\r\n    SqlState: 23502\r\n    MessageText: null value in column \"Template\" of relation \"EmailHistory\" violates not-null constraint\r\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\r\n    SchemaName: dbo\r\n    TableName: EmailHistory\r\n    ColumnName: Template\r\n    File: execMain.c\r\n    Line: 1987\r\n    Routine: ExecConstraints\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","Properties":{"contextType":"NxEmailService.DbContexts.NxEmailServiceDbContext","newline":"\r\n","error":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\r\n ---> Npgsql.PostgresException (0x80004005): 23502: null value in column \"Template\" of relation \"EmailHistory\" violates not-null constraint\r\n\r\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\r\n   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\r\n   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)\r\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n  Exception data:\r\n    Severity: ERROR\r\n    SqlState: 23502\r\n    MessageText: null value in column \"Template\" of relation \"EmailHistory\" violates not-null constraint\r\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\r\n    SchemaName: dbo\r\n    TableName: EmailHistory\r\n    ColumnName: Template\r\n    File: execMain.c\r\n    Line: 1987\r\n    Routine: ExecConstraints\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","EventId":{"Id":10000,"Name":"Microsoft.EntityFrameworkCore.Update.SaveChangesFailed"},"SourceContext":"Microsoft.EntityFrameworkCore.Update","RequestId":"0HNBF2D8PK6OE:00000009","RequestPath":"/api/email-service/send-email","ConnectionId":"0HNBF2D8PK6OE","ApplicationName":"NxEmailService"}}
{"Timestamp":"2025-03-29T23:44:58.5400000+01:00","Level":"Error","MessageTemplate":"An unhandled exception has occurred while executing the request.","TraceId":"c8ae8712232cee70ba92e28253bbb1eb","SpanId":"795fc86243090dbe","Exception":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\r\n ---> Npgsql.PostgresException (0x80004005): 23502: null value in column \"Template\" of relation \"EmailHistory\" violates not-null constraint\r\n\r\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\r\n   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\r\n   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)\r\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n  Exception data:\r\n    Severity: ERROR\r\n    SqlState: 23502\r\n    MessageText: null value in column \"Template\" of relation \"EmailHistory\" violates not-null constraint\r\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\r\n    SchemaName: dbo\r\n    TableName: EmailHistory\r\n    ColumnName: Template\r\n    File: execMain.c\r\n    Line: 1987\r\n    Routine: ExecConstraints\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at LPMS.Infrastructure.Repositories.EmailHistoryRepository.CreateAsync(EmailHistory entity) in C:\\Nikola\\NxEmailService\\NxEmailService\\Repositories\\EmailHistoryRepository.cs:line 18\r\n   at NxEmailService.EmailService.MailClient.SendEmailAsync(EmailSetUp es) in C:\\Nikola\\NxEmailService\\NxEmailService\\EmailService\\MailClient.cs:line 59\r\n   at NxEmailService.Endpoints.EmailServiceEndpoints.<>c.<<MapEndpoints>b__0_0>d.MoveNext() in C:\\Nikola\\NxEmailService\\NxEmailService\\Endpoints\\EmailServiceEndpoints.cs:line 24\r\n--- End of stack trace from previous location ---\r\n   at Microsoft.AspNetCore.Http.RequestDelegateFactory.ExecuteTaskResult[T](Task`1 task, HttpContext httpContext)\r\n   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass102_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()\r\n--- End of stack trace from previous location ---\r\n   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)\r\n   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)\r\n   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)","Properties":{"EventId":{"Id":1,"Name":"UnhandledException"},"SourceContext":"Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware","RequestId":"0HNBF2D8PK6OE:00000009","RequestPath":"/api/email-service/send-email","ConnectionId":"0HNBF2D8PK6OE","ApplicationName":"NxEmailService"}}
